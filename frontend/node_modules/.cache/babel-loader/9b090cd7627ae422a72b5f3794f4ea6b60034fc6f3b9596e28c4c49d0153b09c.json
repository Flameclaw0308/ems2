{"ast":null,"code":"// components/UserManagementPage.js\nimport React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import UserService from'../service/UserService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserManagementPage(){const navigate=useNavigate();const isAdmin=UserService.isAdmin();const[users,setUsers]=useState([]);useEffect(()=>{// Fetch users data when the component mounts\nfetchUsers();},[]);const fetchUsers=async()=>{try{const token=localStorage.getItem('token');// Retrieve the token from localStorage\nconst response=await UserService.getAllUsers(token);//   console.log(response);\nsetUsers(response.ourUsersList);// Assuming the list of users is under the key 'ourUsersList'\n}catch(error){console.error('Error fetching users:',error);}};const updateUser=async userId=>{try{if(!isAdmin){alert(\"You do not have access\");}else{navigate(\"/update-user/\".concat(userId));}}catch(error){console.log(error);}};const deleteUser=async userId=>{try{if(!isAdmin){alert(\"You do not have access\");}else{// Prompt for confirmation before deleting the user\nconst confirmDelete=window.confirm('Are you sure you want to delete this user?');const token=localStorage.getItem('token');// Retrieve the token from localStorage\nif(confirmDelete){await UserService.deleteUser(userId,token);// After deleting the user, fetch the updated list of users\nfetchUsers();}}}catch(error){console.error('Error deleting user:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-management-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Users Management Page\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"reg-button\",children:[\" \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Add User\"})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"City\"}),isAdmin&&/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.city}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>deleteUser(user.id),children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",onClick:()=>updateUser(user.id),children:\"Update User\"})]})]},user.id))})]})]});}export default UserManagementPage;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","UserService","jsx","_jsx","jsxs","_jsxs","UserManagementPage","navigate","isAdmin","users","setUsers","fetchUsers","token","localStorage","getItem","response","getAllUsers","ourUsersList","error","console","updateUser","userId","alert","concat","log","deleteUser","confirmDelete","window","confirm","className","children","to","map","user","id","name","email","city","onClick"],"sources":["C:/Users/ANIRUDH/Desktop/ems/frontend/src/components/userspage/UserManagementPage.jsx"],"sourcesContent":["// components/UserManagementPage.js\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport UserService from '../service/UserService';\n\nfunction UserManagementPage() {\n  const navigate=useNavigate();\n  const isAdmin=UserService.isAdmin();\n  const [users, setUsers] = useState([]);\n\n  useEffect(() => {\n    // Fetch users data when the component mounts\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const token = localStorage.getItem('token'); // Retrieve the token from localStorage\n      const response = await UserService.getAllUsers(token);\n      //   console.log(response);\n      setUsers(response.ourUsersList); // Assuming the list of users is under the key 'ourUsersList'\n    } catch (error) {\n      console.error('Error fetching users:', error);\n    }\n  };\n  const updateUser=async (userId)=>{\n    try{\n      if(!isAdmin)\n        {\n          alert(\"You do not have access\");\n        }\n        else{\n          navigate(`/update-user/${userId}`)\n        }\n    }\n    catch(error){\n      console.log(error);\n    }\n  }\n  const deleteUser = async (userId) => {\n    try {\n      if(!isAdmin)\n      {\n        alert(\"You do not have access\");\n      }\n      else {\n      // Prompt for confirmation before deleting the user\n      const confirmDelete = window.confirm('Are you sure you want to delete this user?');\n\n      const token = localStorage.getItem('token'); // Retrieve the token from localStorage\n      if (confirmDelete) {\n        await UserService.deleteUser(userId, token);\n        // After deleting the user, fetch the updated list of users\n        fetchUsers();\n      }\n    }\n    } catch (error) {\n      console.error('Error deleting user:', error);\n    }\n  }\n   return (\n    <div className=\"user-management-container\">\n      <h2>Users Management Page</h2>\n      <button className='reg-button'> <Link to=\"/register\">Add User</Link></button>\n      <table>\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Name</th>\n            <th>Email</th>\n            <th>City</th>\n            {isAdmin && <th>Actions</th>}\n          </tr>\n        </thead>\n        <tbody>\n          {users.map(user => (\n            <tr key={user.id}>\n              <td>{user.id}</td>\n              <td>{user.name}</td>\n              <td>{user.email}</td>\n              <td>{user.city}</td>\n             <td>\n                <button className='delete-button' onClick={() => deleteUser(user.id)}>Delete</button>\n                {/*<button><Link to={`/update-user/${user.id}`}>Update</Link></button>*/}\n                <button className='update-button' onClick={()=>updateUser(user.id)}>Update User</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default UserManagementPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}